import{l as u,d as v}from"./index-Dt0oMiHw.js";class E{overlay;constructor(){this.overlay=document.createElement("div"),this.overlay.className="storage-manager-overlay",this.overlay.addEventListener("click",a=>{a.target===this.overlay&&this.close()}),document.body.appendChild(this.overlay),this.render()}async render(){const a=await u(),h=a.reduce((e,s)=>e+s.size,0),n=document.createElement("div");n.className="storage-manager-popup";const o=document.createElement("div");o.className="storage-manager-header",o.innerHTML="<h3>Stored Datasets</h3>";const r=document.createElement("button");if(r.className="storage-manager-close",r.textContent="Ã—",r.addEventListener("click",()=>this.close()),o.appendChild(r),n.appendChild(o),a.length===0){const e=document.createElement("div");e.className="storage-manager-empty",e.textContent="No datasets stored.",n.appendChild(e)}else{const e=document.createElement("div");e.className="storage-manager-list";for(const s of a){const d=document.createElement("div");d.className="storage-manager-item";const m=document.createElement("span");m.className="storage-manager-name",m.textContent=s.name;const i=document.createElement("span");i.className="storage-manager-size",i.textContent=p(s.size);const g=document.createElement("span");g.className="storage-manager-date",g.textContent=new Date(s.storedAt).toLocaleDateString();const c=document.createElement("button");c.className="storage-manager-delete",c.textContent="Delete",c.addEventListener("click",async()=>{confirm(`Delete "${s.name}"?`)&&(await v(s.name),n.remove(),this.render())}),d.append(m,i,g,c),e.appendChild(d)}n.appendChild(e)}const l=document.createElement("div");l.className="storage-manager-footer",l.textContent=`Total: ${p(h)} (${a.length} dataset${a.length!==1?"s":""})`,n.appendChild(l),this.overlay.innerHTML="",this.overlay.appendChild(n)}close(){this.overlay.remove()}}function p(t){return t<1024?`${t} B`:t<1024*1024?`${(t/1024).toFixed(1)} KB`:t<1024*1024*1024?`${(t/(1024*1024)).toFixed(1)} MB`:`${(t/(1024*1024*1024)).toFixed(1)} GB`}export{E as StorageManager};
